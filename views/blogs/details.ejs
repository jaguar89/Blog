<%- include('../partials/header.ejs') %>

<%- include('../partials/nav.ejs') %>
 
<div class="details content">
    <h2><%= blog.title %></h2>
    <div class="content">
      <h4><%= blog.snippet %></h4>
      <p><%= blog.content %></p>
    </div>
    <a class="edit"  href="/blogs/edit/<%= blog._id %>">
      <img src="/assets/images/edit.svg" alt="edit icon">
    </a>
    <a class="delete" data-id="<%= blog._id %>">
      <img src="/assets/images/trashcan.svg" alt="delete icon">
    </a>
  </div>

 <script>
       const del = document.querySelector('a.delete');
       del.addEventListener('click' , event => {
         const endpoint = `/blogs/${del.dataset.id}`; 
            fetch( endpoint, {method:'DELETE'})
            .then(res => res.json())
            .then(body => window.location.href = body.redirect)
            .catch(err => console.log(err));
       }); 

 </script>

<%- include('../partials/footer.ejs') %>
    
